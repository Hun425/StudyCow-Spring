-- 일일 정산 프로시저 호출 EVENT
CREATE EVENT E_PROC_DAILY_PROCEDURE
ON SCHEDULE EVERY 1 DAY
STARTS CURRENT_DATE() + INTERVAL 1 DAY + INTERVAL 5 HOUR + INTERVAL 59 MINUTE
DO CALL P_DAILY_CALL_PROCEDURE(
CASE WHEN NOW() - INTERVAL 6 HOUR < CURDATE()
	THEN CURDATE() - INTERVAL 1 DAY
	ELSE CURDATE()
	END);
    
-- 공부시간 정산 프로시저 호출 EVENT
CREATE EVENT E_PROC_STUDY_TIME
ON SCHEDULE EVERY 10 MINUTE
STARTS NOW() + INTERVAL 10 MINUTE
DO CALL P_PROC_STUDY_TIME(
CASE WHEN NOW() - INTERVAL 6 HOUR < CURDATE()
	THEN CURDATE() - INTERVAL 1 DAY
	ELSE CURDATE()
	END);